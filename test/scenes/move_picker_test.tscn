[gd_scene load_steps=6 format=3 uid="uid://dlqmrxcxklu2d"]

[ext_resource type="PackedScene" uid="uid://0y7jpgh7d4dk" path="res://test/scenes/board_test.tscn" id="1_ruqv2"]
[ext_resource type="PackedScene" uid="uid://cv3xq2670msr6" path="res://scenes/game/move_picker/move_picker_interactive.tscn" id="2_6x0cl"]
[ext_resource type="PackedScene" uid="uid://dk6q50tq0w026" path="res://scenes/game/move_picker/move_path_highlight.tscn" id="3_sam0t"]

[sub_resource type="GDScript" id="GDScript_y8nea"]
script/source = "extends Node

signal move_phase_started(player: General.Player, moves: Array[Move])
var player = General.Player.ONE

@onready var move_picker = $MovePicker as MovePicker
@onready var board = $Board as Board


func _ready():
	Settings.can_move_backwards = true
	Settings.can_stack_in_safe_spot = true
	
	move_picker.move_executed.connect(_on_move_picker_move_executed)
	
	await get_tree().create_timer(0.1).timeout
	var moves = board.get_possible_moves(player, 1);
	$MovePicker.start(moves)


func _on_move_picker_move_executed(_move: Move) -> void:
	var moves = board.get_possible_moves(player, 1);
	move_picker.start(moves)
"

[sub_resource type="Curve3D" id="Curve3D_fgcub"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.452454, 0.288418, -0.0923078, 0, 0, 0, 0, 0, 0, -2.41979, 0.56609, -0.977282, 0, 0, 0, 0, 0, 0, -2.43151, 0.56604, 2.11639, 0, 0, 0, 0, 0, 0, -3.42955, 0.56604, 2.02283, 0, 0, 0, 0, 0, 0, -3.42955, 0.56604, -1.00247, 0, 0, 0, 0, 0, 0, -3.44514, 0.56604, -4.97903, 0, 0, 0, 0, 0, 0, -2.30676, 0.56604, -4.99462, 0, 0, 0, 0, 0, 0, -2.49389, 0.56604, -4.10575, 0, 0, 0, 0, 0, 0, -2.07209, 0.20476, -2.31937),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 9
up_vector_enabled = false

[node name="MovePickerTest" instance=ExtResource("1_ruqv2")]
script = SubResource("GDScript_y8nea")

[node name="Board" parent="." index="3"]
transform = Transform3D(0.389188, 0, 0, 0, 0.389188, 0, 0, 0, 0.389188, -0.0227148, 0, -0.0378337)

[node name="MovePicker" parent="." index="4" instance=ExtResource("2_6x0cl")]

[node name="MovePathHighlight" parent="." index="5" instance=ExtResource("3_sam0t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.41018, 0, 1.41478)
visible = false
curve = SubResource("Curve3D_fgcub")

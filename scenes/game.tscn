[gd_scene load_steps=19 format=3 uid="uid://bkjl7wlfjhp01"]

[ext_resource type="PackedScene" uid="uid://cgkfm7n305bgj" path="res://scenes/environment/environment.tscn" id="1_kqpqp"]
[ext_resource type="PackedScene" uid="uid://dqreeigpne122" path="res://scenes/game/systems/move_picker/move_picker.tscn" id="2_1yp27"]
[ext_resource type="PackedScene" uid="uid://s47hmmlcss14" path="res://scenes/game/entities/boards/board_finkel.tscn" id="2_45x2g"]
[ext_resource type="PackedScene" uid="uid://d4k7dx5sp6itq" path="res://scenes/game/systems/dice_roller/dice_roller.tscn" id="3_n58rk"]
[ext_resource type="PackedScene" uid="uid://bcjpac1cs0xcy" path="res://scenes/npcs/opponent_guard.tscn" id="4_0uuko"]
[ext_resource type="PackedScene" uid="uid://c8o1oiumwk2ow" path="res://scenes/game/systems/game_camera.tscn" id="5_jk6gv"]
[ext_resource type="PackedScene" uid="uid://drllx28djyai7" path="res://scenes/npcs/npc_system.tscn" id="6_7r6bu"]
[ext_resource type="AudioStream" uid="uid://bn3jyvfxklhdo" path="res://audio/sfx_mastered/ambience-kitchen-sounds.mp3" id="7_do1ug"]
[ext_resource type="Script" path="res://scripts/audio/ambient_audio_player.gd" id="8_lfpgi"]
[ext_resource type="AudioStream" uid="uid://cypkb6b2st6b1" path="res://audio/sfx_mastered/ambience-birds-and-crickets.mp3" id="9_0a4og"]

[sub_resource type="BoxShape3D" id="BoxShape3D_wg4la"]
size = Vector3(0.53421, 0.1, 1.15552)

[sub_resource type="BoxShape3D" id="BoxShape3D_qcwgi"]
size = Vector3(1, 0.05, 0.1)

[sub_resource type="BoxShape3D" id="BoxShape3D_8qwsb"]
size = Vector3(0.1, 0.05, 1)

[sub_resource type="Curve3D" id="Curve3D_gel6c"]
_data = {
"points": PackedVector3Array(1.17921, -0.0768166, 0.433843, -1.17921, 0.0768166, -0.433843, 0.936, 0, 0.496, 0, 0, 0, 0, 0, 0, -3.594, 0, -0.916, 0, 0, 0, 0, 0, 0, -12.414, 0, -1.165, 0, 0, 0, 0, 0, 0, -13.0017, 0, 0.385633),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_utdk4"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.264, 0, 3.987, -0.865, 0, 0, 0.865, 0, 0, -1.628, 0, 4.14, -0.0239821, 0, 0.897715, 0.0239821, 0, -0.897715, -0.254, 0, 2.214, 0, 0, 0, 0, 0, 0, -0.215, 0, -0.554),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_w0vht"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.203, 0, -0.637, 0, 0, 0, 0, 0, 0, -0.363, 0, 0.665, -2.02511, 0, -0.125696, 2.02511, 0, 0.125696, 1.74568, 0, 2.8336, 0, 0, 0, 0, 0, 0, 6.09242, 0, 4.81994, -0.633246, 0, 0.228384, 0.633246, 0, -0.228384, 8.849, 0, 5.584),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0)
}
point_count = 5
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_ag4c4"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.74496, -0.00807405, -0.924744, -0.024, 0, -0.898, 0.024, 0, 0.898, -0.639858, 0.00594401, 1.70974, 0.865, 0, 0, -0.865, 0, 0, -1.86563, 0, 3.12895, -0.865, 0, 0, 0, 0, 0, -4.51176, -0.000873566, 3.133),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_ma8g4"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.51176, -0.000873566, 3.133, -0.865, 0, 0, 0.865, 0, 0, -1.86563, 0, 3.12895, -0.0239821, 0, 0.897715, 0.0239821, 0, -0.897715, -0.703071, 0.0052011, 1.71327, 0, 0, 0, 0, 0, 0, -0.624147, -0.0158007, -0.897799),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[node name="Level" type="Node3D"]

[node name="Environment" parent="." instance=ExtResource("1_kqpqp")]

[node name="TableFloor" type="StaticBody3D" parent="Environment" groups=["table"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.45152, -0.264447, 6.36289)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/TableFloor"]
transform = Transform3D(0.498594, 0, -0.866836, 0, 1, 0, 0.866836, 0, 0.498594, 0, 0, 0)
shape = SubResource("BoxShape3D_wg4la")

[node name="Wall1" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.93464, -0.192689, 6.62823)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall1"]
transform = Transform3D(0.498594, 0, -0.866836, 0, 1, 0, 0.866836, 0, 0.498594, 0, 0, 0)
shape = SubResource("BoxShape3D_qcwgi")

[node name="Wall2" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.7485, -0.197431, 6.18931)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall2"]
transform = Transform3D(0.498594, 0, -0.866836, 0, 1, 0, 0.866836, 0, 0.498594, 0, 0, 0)
shape = SubResource("BoxShape3D_qcwgi")

[node name="Wall3" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.55345, -0.201724, 6.62311)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall3"]
transform = Transform3D(0.498594, 0, -0.866836, 0, 1, 0, 0.866836, 0, 0.498594, 0, 0, 0)
shape = SubResource("BoxShape3D_8qwsb")

[node name="Wall4" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.26283, -0.20785, 6.12333)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall4"]
transform = Transform3D(0.498594, 0, -0.866836, 0, 1, 0, 0.866836, 0, 0.498594, 0, 0, 0)
shape = SubResource("BoxShape3D_8qwsb")

[node name="BoardSpawn" type="Marker3D" parent="." groups=["board_spawn"]]
transform = Transform3D(0.518027, 0, -0.855364, 0, 1, 0, 0.855364, 0, 0.518027, 4.47124, -0.21066, 6.34732)
gizmo_extents = 0.01
metadata/_edit_group_ = true

[node name="BoardForPerspective" parent="BoardSpawn" instance=ExtResource("2_45x2g")]
process_mode = 4
transform = Transform3D(1, 0, -0.000366539, 0, 1, 0, 0.000366539, 0, 1, 0, 0, 0)

[node name="Systems" type="Node" parent="."]

[node name="MovePicker" parent="Systems" instance=ExtResource("2_1yp27")]

[node name="DiceRoller" parent="Systems" instance=ExtResource("3_n58rk")]
transform = Transform3D(0.847168, 0, 0.531325, 0, 1, 0, -0.531325, 0, 0.847168, 4.60504, -0.212933, 6.4243)

[node name="DiceRoller2" parent="Systems" instance=ExtResource("3_n58rk")]
transform = Transform3D(0.847122, 0, 0.531399, 0, 1, 0, -0.531399, 0, 0.847122, 4.46688, -0.212933, 6.17377)
assigned_player = 1

[node name="Opponent_Guard_Animated" parent="." instance=ExtResource("4_0uuko")]
transform = Transform3D(0.848048, 0, 0.52992, 0, 1, 0, -0.52992, 0, 0.848048, 4.17257, -0.684179, 5.80273)

[node name="GameCamera" parent="." node_paths=PackedStringArray("pov_start", "pov_intro", "pov_singleplayer", "pov_hotseat") instance=ExtResource("5_jk6gv")]
transform = Transform3D(0.848048, 0, 0.529919, 0, 1, 0, -0.529919, 0, 0.848048, 4.677, 0.167, 6.671)
pov_start = NodePath("../CameraPOVS/StartPOV")
pov_intro = NodePath("../CameraPOVS/SingleplayerIntroPOV")
pov_singleplayer = NodePath("../CameraPOVS/SingleplayerGamePOV")
pov_hotseat = NodePath("../CameraPOVS/HotseatPOV")

[node name="CameraPOVS" type="Node3D" parent="."]

[node name="StartPOV" type="Camera3D" parent="CameraPOVS"]
process_mode = 4
transform = Transform3D(0.848048, 0.181651, 0.497812, 1.11759e-08, 0.939412, -0.34279, -0.529919, 0.290703, 0.796667, 4.75128, 0.356789, 6.78987)
fov = 65.0

[node name="SingleplayerIntroPOV" type="Camera3D" parent="CameraPOVS"]
process_mode = 4
transform = Transform3D(0.848048, 0, 0.529919, 0, 1, 0, -0.529919, 0, 0.848048, 4.677, 0.167, 6.671)
fov = 65.0

[node name="SingleplayerGamePOV" type="Camera3D" parent="CameraPOVS"]
process_mode = 4
transform = Transform3D(0.848048, -0.306316, 0.432417, 0, 0.816006, 0.578043, -0.529919, -0.490208, 0.692013, 4.68321, 0.20134, 6.68615)
fov = 65.0

[node name="HotseatPOV" type="Camera3D" parent="CameraPOVS"]
process_mode = 4
transform = Transform3D(-0.513508, -0.825552, 0.234038, 1.49012e-08, 0.272744, 0.962087, -0.858085, 0.494039, -0.140056, 4.55151, 0.083335, 6.29023)
fov = 65.0

[node name="NPCSystem" parent="." node_paths=PackedStringArray("path_follow_guard_1", "path_follow_guard_2", "path_follow_guard_3", "path_follow_kitchen_1", "path_follow_kitchen_2") instance=ExtResource("6_7r6bu")]
path_follow_guard_1 = NodePath("../NPC_Paths/GuardPaths/ToStorage/ToStorage_PathFollow3D")
path_follow_guard_2 = NodePath("../NPC_Paths/GuardPaths/Storage_To_Kitchen/StorageToKitchen_PathFollow3D")
path_follow_guard_3 = NodePath("../NPC_Paths/GuardPaths/Kitchen_To_Start/KitchenToStart_PathFollow3D")
path_follow_kitchen_1 = NodePath("../NPC_Paths/KitchenPaths/Kitchen_To_Storage/Kitchen_To_Storage_PathFollow3D")
path_follow_kitchen_2 = NodePath("../NPC_Paths/KitchenPaths/Storage_To_Kitchen2/StorageToKitchen2_PathFollow3D")

[node name="NPC_Paths" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.662207, 0)

[node name="GuardPaths" type="Node3D" parent="NPC_Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1165, 0, 5.22195)

[node name="ToStorage" type="Path3D" parent="NPC_Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0613985, 0, 0)
curve = SubResource("Curve3D_gel6c")

[node name="ToStorage_PathFollow3D" type="PathFollow3D" parent="NPC_Paths/GuardPaths/ToStorage"]
transform = Transform3D(-0.34528, 0.057269, -0.936741, -3.72526e-09, 0.998133, 0.0610216, 0.93849, 0.0210698, -0.344636, 0.936, 0, 0.496)
use_model_front = true
loop = false

[node name="Storage_To_Kitchen" type="Path3D" parent="NPC_Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_utdk4")

[node name="StorageToKitchen_PathFollow3D" type="PathFollow3D" parent="NPC_Paths/GuardPaths/Storage_To_Kitchen"]
transform = Transform3D(0.0579449, 0, 0.998319, 0, 1, 0, -0.998319, 0, 0.0579449, -4.264, 0, 3.987)
use_model_front = true
loop = false

[node name="Kitchen_To_Start" type="Path3D" parent="NPC_Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_w0vht")

[node name="KitchenToStart_PathFollow3D" type="PathFollow3D" parent="NPC_Paths/GuardPaths/Kitchen_To_Start"]
transform = Transform3D(0.992532, 0, -0.12197, 0, 1, 0, 0.12197, 0, 0.992532, -0.203, 0, -0.637)
use_model_front = true
loop = false

[node name="KitchenPaths" type="Node3D" parent="NPC_Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1165, 0, 5.22195)

[node name="Kitchen_To_Storage" type="Path3D" parent="NPC_Paths/KitchenPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
visible = false
curve = SubResource("Curve3D_ag4c4")

[node name="Kitchen_To_Storage_PathFollow3D" type="PathFollow3D" parent="NPC_Paths/KitchenPaths/Kitchen_To_Storage"]
transform = Transform3D(0.999195, -0.000211939, 0.039862, -7.27588e-12, 0.999986, 0.00531663, -0.0398626, -0.00531246, 0.999181, -0.74496, -0.00807405, -0.924744)
use_model_front = true
loop = false

[node name="Storage_To_Kitchen2" type="Path3D" parent="NPC_Paths/KitchenPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_ma8g4")

[node name="StorageToKitchen2_PathFollow3D" type="PathFollow3D" parent="NPC_Paths/KitchenPaths/Storage_To_Kitchen2"]
transform = Transform3D(-0.00153056, -0.000330129, 0.99999, -1.45518e-11, 1, 0.000330126, -0.99999, 5.05272e-07, -0.00153056, -4.51176, -0.000873566, 3.133)
use_model_front = true
loop = false

[node name="AmbientAudio" type="Node3D" parent="."]

[node name="KitchenSounds" type="AudioStreamPlayer3D" parent="AmbientAudio"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.25614, -1.01644, 6.51755)
stream = ExtResource("7_do1ug")
autoplay = true
script = ExtResource("8_lfpgi")

[node name="BirdsAndCrickets1" type="AudioStreamPlayer3D" parent="AmbientAudio"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.95781, 2.98356, -2.50387)
stream = ExtResource("9_0a4og")
autoplay = true
script = ExtResource("8_lfpgi")

[node name="BirdsAndCrickets2" type="AudioStreamPlayer3D" parent="AmbientAudio"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.48208, 5.04287, 12.2205)
stream = ExtResource("9_0a4og")
autoplay = true
script = ExtResource("8_lfpgi")
playback_offset = 34

[node name="BirdsAndCrickets3" type="AudioStreamPlayer3D" parent="AmbientAudio"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.17094, 5.04287, 8.10376)
stream = ExtResource("9_0a4og")
autoplay = true
script = ExtResource("8_lfpgi")
playback_offset = 68

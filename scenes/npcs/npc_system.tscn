[gd_scene load_steps=9 format=3 uid="uid://drllx28djyai7"]

[ext_resource type="Script" path="res://scripts/npc_system/npc_system.gd" id="1_3oufk"]
[ext_resource type="PackedScene" uid="uid://4goheq1kyhy1" path="res://test/scenes/guard_npc.tscn" id="2_6rgek"]
[ext_resource type="PackedScene" uid="uid://c2osilgwlxj1y" path="res://test/scenes/kitchen_npc.tscn" id="3_lqpm5"]

[sub_resource type="Curve3D" id="Curve3D_c38qy"]
_data = {
"points": PackedVector3Array(1.17921, -0.0768166, 0.433843, -1.17921, 0.0768166, -0.433843, 0, 0, 0, 0, 0, 0, 0, 0, 0, -3.594, 0, -0.916, 0, 0, 0, 0, 0, 0, -12.414, 0, -1.165, 0, 0, 0, 0, 0, 0, -13.0017, 0, 0.385633),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_fbvn3"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.264, 0, 3.987, -0.865, 0, 0, 0.865, 0, 0, -1.628, 0, 4.14, -0.0239821, 0, 0.897715, 0.0239821, 0, -0.897715, -0.254, 0, 2.214, 0, 0, 0, 0, 0, 0, -0.215, 0, -0.554),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_j1ftd"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.203, 0, -0.637, 0, 0, 0, 0, 0, 0, -0.363, 0, 0.665, -2.02511, 0, -0.125696, 2.02511, 0, 0.125696, 1.74568, 0, 2.8336, 0, 0, 0, 0, 0, 0, 6.09242, 0, 4.81994, -0.633246, 0, 0.228384, 0.633246, 0, -0.228384, 7.14091, 0, 5.24557),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0)
}
point_count = 5
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_s5uld"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -0.74496, -0.00807405, -0.924744, -0.024, 0, -0.898, 0.024, 0, 0.898, -0.639858, 0.00594401, 1.70974, 0.865, 0, 0, -0.865, 0, 0, -1.86563, 0, 3.12895, -0.865, 0, 0, 0, 0, 0, -4.51176, -0.000873566, 3.133),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[sub_resource type="Curve3D" id="Curve3D_snn0l"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -4.51176, -0.000873566, 3.133, -0.865, 0, 0, 0.865, 0, 0, -1.86563, 0, 3.12895, -0.0239821, 0, 0.897715, 0.0239821, 0, -0.897715, -0.703071, 0.0052011, 1.71327, 0, 0, 0, 0, 0, 0, -0.624147, -0.0158007, -0.897799),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4
up_vector_enabled = false

[node name="NPCSystem" type="Node3D"]
script = ExtResource("1_3oufk")

[node name="NPCs" type="Node3D" parent="."]

[node name="Guard_NPC" parent="NPCs" node_paths=PackedStringArray("_path", "_path2", "_path3", "_watch_point") instance=ExtResource("2_6rgek")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1165, 0.106368, 5.22195)
_path = NodePath("../../Paths/GuardPaths/ToStorage/ToStorage_PathFollow3D")
_path2 = NodePath("../../Paths/GuardPaths/Storage_To_Kitchen/StorageToKitchen_PathFollow3D")
_path3 = NodePath("../../Paths/GuardPaths/Kitchen_To_Start/KitchenToStart_PathFollow3D")
_watch_point = NodePath("../../Board_Marker")

[node name="Kitchen_NPC" parent="NPCs" node_paths=PackedStringArray("_path", "_path2", "_storage_point") instance=ExtResource("3_lqpm5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.681957, 0.127295, -2.3396)
_path = NodePath("../../Paths/KitchenPaths/Kitchen_To_Storage/Kitchen_To_Storage_PathFollow3D")
_path2 = NodePath("../../Paths/KitchenPaths/Storage_To_Kitchen2/StorageToKitchen2_PathFollow3D")
_move_speed = 1.2
_rotation_speed = 0.7
_start_delay = 10.0
_storage_point = NodePath("../../Storage_Marker")

[node name="Paths" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.662207, 0)

[node name="GuardPaths" type="Node3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1165, 0, 5.22195)

[node name="ToStorage" type="Path3D" parent="Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0613985, 0, 0)
curve = SubResource("Curve3D_c38qy")

[node name="ToStorage_PathFollow3D" type="PathFollow3D" parent="Paths/GuardPaths/ToStorage"]
transform = Transform3D(-0.34528, 0.057269, -0.936741, -3.72526e-09, 0.998133, 0.0610216, 0.93849, 0.0210698, -0.344636, 0, 0, 0)
use_model_front = true
loop = false

[node name="Storage_To_Kitchen" type="Path3D" parent="Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_fbvn3")

[node name="StorageToKitchen_PathFollow3D" type="PathFollow3D" parent="Paths/GuardPaths/Storage_To_Kitchen"]
transform = Transform3D(0.0579449, 0, 0.998319, 0, 1, 0, -0.998319, 0, 0.0579449, -4.264, 0, 3.987)
use_model_front = true
loop = false

[node name="Kitchen_To_Start" type="Path3D" parent="Paths/GuardPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_j1ftd")

[node name="KitchenToStart_PathFollow3D" type="PathFollow3D" parent="Paths/GuardPaths/Kitchen_To_Start"]
transform = Transform3D(0.992532, 0, -0.12197, 0, 1, 0, 0.12197, 0, 0.992532, -0.203, 0, -0.637)
use_model_front = true
loop = false

[node name="KitchenPaths" type="Node3D" parent="Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1165, 0, 5.22195)

[node name="Kitchen_To_Storage" type="Path3D" parent="Paths/KitchenPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
visible = false
curve = SubResource("Curve3D_s5uld")

[node name="Kitchen_To_Storage_PathFollow3D" type="PathFollow3D" parent="Paths/KitchenPaths/Kitchen_To_Storage"]
transform = Transform3D(0.999195, -0.000211939, 0.039862, -7.27588e-12, 0.999986, 0.00531663, -0.0398626, -0.00531246, 0.999181, -0.74496, -0.00807405, -0.924744)
use_model_front = true
loop = false

[node name="Storage_To_Kitchen2" type="Path3D" parent="Paths/KitchenPaths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.1165, 0, -5.22195)
curve = SubResource("Curve3D_snn0l")

[node name="StorageToKitchen2_PathFollow3D" type="PathFollow3D" parent="Paths/KitchenPaths/Storage_To_Kitchen2"]
transform = Transform3D(-0.00153056, -0.000330129, 0.999993, -1.45518e-11, 1, 0.000330127, -0.999993, 5.05272e-07, -0.00153056, -4.51176, -0.000873566, 3.133)
use_model_front = true
loop = false

[node name="Board_Marker" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.29601, -0.175248, 6.63074)

[node name="Storage_Marker" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.95442, -0.290202, 0.658922)
